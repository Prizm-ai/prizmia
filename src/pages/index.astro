---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import ArticleCard from '../components/ArticleCard.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';

// Recuperer tous les articles du blog
const allPosts = await getCollection('blog');

// Fonction pour classifier les articles
function classifyPost(post) {
  const title = post.data.title?.toLowerCase() || '';
  const content = post.body?.toLowerCase() || '';
  
  // Si deja classifie, utiliser la categorie existante
  if (post.data.category) return post.data.category;
  
  // Classification automatique (fallback)
  if (title.includes('manifeste') || title.includes('vision')) return 'analyses';
  if (title.includes('guide') || title.includes('comment')) return 'guides';
  if (title.includes('outil') || title.includes('template')) return 'outils';
  
  return 'lessentiel';
}

// Organiser les articles par categorie
const lessentielPosts = [];
const guidesPosts = [];
const analysesPosts = [];

// Classifier et distribuer les articles
allPosts.forEach(post => {
  const category = classifyPost(post);
  
  if (category === 'lessentiel') {
    lessentielPosts.push(post);
  } else if (category === 'guides') {
    guidesPosts.push(post);
  } else if (category === 'analyses') {
    analysesPosts.push(post);
  }
});

// Trier par date et limiter a 3 par categorie
const sortAndLimit = (posts) => {
  return posts
    .sort((a, b) => {
      const dateA = a.data.pubDate ? new Date(a.data.pubDate) : new Date();
      const dateB = b.data.pubDate ? new Date(b.data.pubDate) : new Date();
      return dateB.valueOf() - dateA.valueOf();
    })
    .slice(0, 3);
};

const lessentielLimited = sortAndLimit(lessentielPosts);
const guidesLimited = sortAndLimit(guidesPosts);
const analysesLimited = sortAndLimit(analysesPosts);
---

<!doctype html>
<html lang="fr">
	<head>
		<!-- âœ… CORRECTION : Meta description SEO optimisÃ©e -->
		<BaseHead 
			title="Prizm AI - IA pratique pour PME et ETI franÃ§aises"
			description="Analyses techniques, guides pratiques et outils IA pour les professionnels franÃ§ais. Comprenez et appliquez l'IA dans votre contexte mÃ©tier."
		/>
		<style>
			html {
				scroll-behavior: smooth;
			}
			.feature-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 4px 15px rgba(0,0,0,0.08);
			}
			.coming-soon-link:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 15px rgba(102,126,234,0.15);
			}
		</style>
	</head>
	<body>
		<Header />
		<main class="container-fluid">
			<!-- Hero Section -->
			<section style="background: linear-gradient(to bottom right, rgba(102,126,234,0.05), rgba(240,147,251,0.05)); padding: 6rem 0; text-align: center; position: relative; overflow: hidden;">
				<div style="position: absolute; top: -50%; right: -25%; width: 800px; height: 800px; background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); border-radius: 50%; filter: blur(100px);"></div>
				<div style="max-width: 800px; margin: 0 auto; padding: 0 1.5rem; position: relative; z-index: 1;">
					<h1 style="font-size: 3.5rem; font-weight: 300; line-height: 1.1; margin-bottom: 1.5rem; background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
						L'IA sous tous les angles
					</h1>
					<p style="font-size: 1.375rem; color: #4a5568; margin-bottom: 2.5rem;">
						Analyses pointues et guides pratiques pour les professionnels qui veulent comprendre et appliquer l'IA dans leur contexte
					</p>
					<!-- âœ… CORRECTION : CTA Hero optimisÃ© - vers section lessentiel -->
					<a href="#lessentiel" style="display: inline-flex; align-items: center; gap: 0.75rem; background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); color: white; padding: var(--space-4) 2rem; border-radius: var(--radius-xl); text-decoration: none; font-weight: var(--font-semibold); font-size: var(--text-lg); box-shadow: 0 4px 15px rgba(0,0,0,0.08); transition: all 0.3s;">
						DÃ©couvrir les articles
						<span>â†’</span>
					</a>
				</div>
			</section>

			<!-- L'Essentiel IA -->
			<section id="lessentiel" style="padding: 5rem 0;">
				<div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
						<div style="display: flex; align-items: center; gap: 1rem;">
							<span style="font-size: 2rem;">ğŸ“°</span>
							<h2 style="font-size: 2rem; font-weight: var(--font-semibold);">L'Essentiel IA</h2>
						</div>
						<a href="/blog" style="color: var(--color-primary); text-decoration: none; font-weight: var(--font-medium);">Voir tout â†’</a>
					</div>
					<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 2rem;">
						{lessentielLimited.length > 0 ? (
							lessentielLimited.map((post, index) => (
								<ArticleCard 
									title={post.data.title}
									description={post.data.description || "DÃ©couvrez les derniÃ¨res actualitÃ©s de l'IA pour les PME."}
									category="lessentiel"
									readingTime={post.data.readingTime || `${Math.ceil((post.body?.length || 1000) / 1500)} min`}
									emoji={post.data.emoji || "ğŸ“°"}
									image={post.data.imageUrl}
									href={`/blog/${post.id}`}
									featured={index === 0}
								/>
							))
						) : (
							<div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: linear-gradient(135deg, rgba(102,126,234,0.05), rgba(240,147,251,0.05)); border-radius: var(--radius-2xl);">
								<div style="font-size: 3rem; margin-bottom: 1rem;">ğŸš€</div>
								<h3 style="font-size: var(--text-xl); color: #4a5568; margin-bottom: 0.5rem;">Premiers articles en prÃ©paration</h3>
								<p style="color: #6b7280;">Notre systÃ¨me IA gÃ©nÃ¨re du contenu de qualitÃ© pour vous.</p>
							</div>
						)}
					</div>
				</div>
			</section>

			<!-- Guides Pratiques -->
			<section id="guides" style="background: #f8f9fa; padding: 5rem 0;">
				<div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
						<div style="display: flex; align-items: center; gap: 1rem;">
							<span style="font-size: 2rem;">ğŸ¯</span>
							<h2 style="font-size: 2rem; font-weight: var(--font-semibold);">Guides Pratiques</h2>
						</div>
						<a href="/blog" style="color: var(--color-primary); text-decoration: none; font-weight: var(--font-medium);">Tous les guides â†’</a>
					</div>
					<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 2rem;">
						{guidesLimited.length > 0 ? (
							guidesLimited.map((post) => (
								<ArticleCard 
									title={post.data.title}
									description={post.data.description || "Guide pratique pour implÃ©menter l'IA dans votre entreprise."}
									category="guides"
									readingTime={post.data.readingTime || `${Math.ceil((post.body?.length || 1500) / 1500)} min`}
									emoji={post.data.emoji || "ğŸ¯"}
									image={post.data.imageUrl}
									href={`/blog/${post.id}`}
								/>
							))
						) : (
							<div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: white; border-radius: var(--radius-2xl);">
								<div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“š</div>
								<h3 style="font-size: var(--text-xl); color: #4a5568; margin-bottom: 0.5rem;">Guides en prÃ©paration</h3>
								<p style="color: #6b7280;">Des tutoriels pratiques arrivent bientÃ´t.</p>
							</div>
						)}
					</div>
				</div>
			</section>

			<!-- Analyses & Decryptages -->
			<section id="analyses" style="padding: 5rem 0;">
				<div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
						<div style="display: flex; align-items: center; gap: 1rem;">
							<span style="font-size: 2rem;">ğŸ”</span>
							<h2 style="font-size: 2rem; font-weight: var(--font-semibold);">Analyses & DÃ©cryptages</h2>
						</div>
						<a href="/blog" style="color: var(--color-primary); text-decoration: none; font-weight: var(--font-medium);">Toutes les analyses â†’</a>
					</div>
					<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 2rem;">
						{analysesLimited.length > 0 ? (
							analysesLimited.map((post) => (
								<ArticleCard 
									title={post.data.title}
									description={post.data.description || "Analyse approfondie des enjeux de l'IA pour les entreprises."}
									category="analyses"
									readingTime={post.data.readingTime || `${Math.ceil((post.body?.length || 1200) / 1500)} min`}
									emoji={post.data.emoji || "ğŸ”"}
									image={post.data.imageUrl}
									href={`/blog/${post.id}`}
								/>
							))
						) : (
							<div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: linear-gradient(135deg, rgba(102,126,234,0.05), rgba(240,147,251,0.05)); border-radius: var(--radius-2xl);">
								<div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ”¬</div>
								<h3 style="font-size: var(--text-xl); color: #4a5568; margin-bottom: 0.5rem;">Analyses en prÃ©paration</h3>
								<p style="color: #6b7280;">Des dÃ©cryptages approfondis arrivent bientÃ´t.</p>
							</div>
						)}
					</div>
				</div>
			</section>

			<!-- Boite a Outils Section -->
			<section id="outils" style="padding: 5rem 0; background: #f8f9fa;">
				<div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
						<div style="display: flex; align-items: center; gap: 1rem;">
							<span style="font-size: 2rem;">ğŸ› ï¸</span>
							<h2 style="font-size: 2rem; font-weight: var(--font-semibold);">BoÃ®te Ã  Outils</h2>
						</div>
						<a href="/blog" style="color: var(--color-primary); text-decoration: none; font-weight: var(--font-medium);">Tous les outils â†’</a>
					</div>
					
					<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
						<!-- Guide du DÃ©butant -->
						<a href="/outils/guide-debutant" style="text-decoration: none; color: inherit; transition: transform 0.3s;" class="tool-card">
							<div style="background: white; border-radius: var(--radius-2xl); padding: 2rem; border: 2px solid #e5e7eb; transition: all 0.3s; height: 100%;">
								<div style="font-size: 3rem; margin-bottom: 1.5rem;">ğŸ¯</div>
								<h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: 1rem; color: var(--color-primary);">
									Guide du DÃ©butant IA
								</h3>
								<p style="color: #6b7280; margin-bottom: 1.5rem; line-height: 1.6;">
									L'Intelligence Artificielle expliquÃ©e simplement en 5 minutes. Parfait pour commencer !
								</p>
								<div style="display: flex; align-items: center; justify-content: space-between;">
									<span style="background: rgba(102,126,234,0.1); color: var(--color-primary); padding: 0.25rem 0.75rem; border-radius: var(--radius-lg); font-size: 0.875rem; font-weight: 500;">
										5 min de lecture
									</span>
									<span style="color: var(--color-primary); font-weight: 500;">
										Commencer â†’
									</span>
								</div>
							</div>
						</a>

						<!-- Placeholder pour futurs outils -->
						<div style="background: white; border-radius: var(--radius-2xl); padding: 2rem; border: 2px dashed #e5e7eb; text-align: center;">
							<div style="font-size: 3rem; margin-bottom: 1.5rem; opacity: 0.5;">ğŸ› ï¸</div>
							<h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: 1rem; color: #9ca3af;">
								Prochains outils
							</h3>
							<p style="color: #9ca3af; margin-bottom: 1.5rem;">
								Templates Excel, checklists, scripts d'automatisation...
							</p>
							<a href="/newsletter" style="color: var(--color-primary); text-decoration: none; font-weight: 500;">
								ÃŠtre notifiÃ© â†’
							</a>
						</div>
					</div>
				</div>
			</section>

			<!-- Section Start Here - En prÃ©paration -->
			<section id="start-here" style="padding: 5rem 0;">
				<div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
					<div style="background: white; border: 2px solid var(--color-primary); border-radius: var(--radius-2xl); padding: 3rem; max-width: 800px; margin: 0 auto;">
						<!-- Badge EN PRÃ‰PARATION -->
						<div style="text-align: center; margin-bottom: 2rem;">
							<span style="background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); color: white; padding: 0.5rem 1.5rem; border-radius: var(--radius-full); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">
								En prÃ©paration
							</span>
						</div>
						
						<!-- Titre -->
						<h2 style="text-align: center; font-size: 2rem; margin-bottom: 1rem; background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
							ğŸš€ Parcours DÃ©butant IA
						</h2>
						
						<!-- Description -->
						<p style="text-align: center; color: #6b7280; font-size: var(--text-lg); margin-bottom: 2.5rem; max-width: 600px; margin-left: auto; margin-right: auto;">
							4 guides essentiels pour maÃ®triser les fondamentaux de l'IA appliquÃ©e arrivent trÃ¨s bientÃ´t
						</p>
						
						<!-- Liste des ressources Ã  venir -->
						<div style="background: linear-gradient(135deg, rgba(102,126,234,0.05), rgba(240,147,251,0.05)); border-radius: var(--radius-xl); padding: 2rem; margin-bottom: 2.5rem;">
							<ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: 1rem;">
								<li style="display: flex; align-items: center; gap: 1rem; color: #4a5568;">
									<span style="background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: var(--font-semibold); color: var(--color-primary); box-shadow: 0 2px 8px rgba(102,126,234,0.15);">1</span>
									<span style="font-weight: var(--font-medium);">Comprendre les LLMs</span>
								</li>
								<li style="display: flex; align-items: center; gap: 1rem; color: #4a5568;">
									<span style="background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: var(--font-semibold); color: var(--color-primary); box-shadow: 0 2px 8px rgba(102,126,234,0.15);">2</span>
									<span style="font-weight: var(--font-medium);">Votre premier RAG</span>
								</li>
								<li style="display: flex; align-items: center; gap: 1rem; color: #4a5568;">
									<span style="background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: var(--font-semibold); color: var(--color-primary); box-shadow: 0 2px 8px rgba(102,126,234,0.15);">3</span>
									<span style="font-weight: var(--font-medium);">Mesurer le ROI</span>
								</li>
								<li style="display: flex; align-items: center; gap: 1rem; color: #4a5568;">
									<span style="background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: var(--font-semibold); color: var(--color-primary); box-shadow: 0 2px 8px rgba(102,126,234,0.15);">4</span>
									<span style="font-weight: var(--font-medium);">Ã‰viter les piÃ¨ges</span>
								</li>
							</ul>
						</div>
						
						<!-- CTA -->
						<div style="text-align: center;">
							<a href="/newsletter" class="coming-soon-link" style="display: inline-flex; align-items: center; gap: 0.75rem; background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); color: white; padding: var(--space-4) 2rem; border-radius: var(--radius-xl); text-decoration: none; font-weight: var(--font-semibold); font-size: var(--text-base); box-shadow: 0 4px 15px rgba(102,126,234,0.2); transition: all 0.3s;">
								ÃŠtre notifiÃ© du lancement
								<span>â†’</span>
							</a>
						</div>
					</div>
				</div>
			</section>

			<!-- âœ… CORRECTION : Typo corrigÃ©e "Prism â†’ Prizm" -->
			<!-- Pourquoi Prizm AI -->
			<section style="padding: 5rem 0; background: #f8f9fa;">
				<div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
					<h2 style="text-align: center; margin-bottom: 3.75rem; font-size: 2rem;">Pourquoi Prizm AI ?</h2>
					<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
						<div class="feature-card" style="text-align: center; padding: 2.5rem 2rem; background: white; border-radius: var(--radius-2xl); transition: all 0.3s;">
							<div style="font-size: 3rem; margin-bottom: 1.25rem; display: inline-block; background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); width: 80px; height: 80px; line-height: 80px; border-radius: 20px;">
								ğŸ”
							</div>
							<h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: 0.75rem;">Analyse en profondeur</h3>
							<p style="font-size: var(--text-base); color: #4a5568;">Pas de bullshit marketing. Des analyses techniques basÃ©es sur des tests rÃ©els et des retours terrain.</p>
						</div>
						<div class="feature-card" style="text-align: center; padding: 2.5rem 2rem; background: white; border-radius: var(--radius-2xl); transition: all 0.3s;">
							<div style="font-size: 3rem; margin-bottom: 1.25rem; display: inline-block; background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); width: 80px; height: 80px; line-height: 80px; border-radius: 20px;">
								âš¡
							</div>
							<h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: 0.75rem;">100% actionnable</h3>
							<p style="font-size: var(--text-base); color: #4a5568;">Chaque article contient des templates, checklists ou code prÃªts Ã  l'emploi dans votre contexte.</p>
						</div>
						<div class="feature-card" style="text-align: center; padding: 2.5rem 2rem; background: white; border-radius: var(--radius-2xl); transition: all 0.3s;">
							<div style="font-size: 3rem; margin-bottom: 1.25rem; display: inline-block; background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); width: 80px; height: 80px; line-height: 80px; border-radius: 20px;">
								ğŸ¯
							</div>
							<h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: 0.75rem;">ROI-focused</h3>
							<p style="font-size: var(--text-base); color: #4a5568;">On ne parle que de ce qui gÃ©nÃ¨re un impact business mesurable. Pas de hype, que du concret.</p>
						</div>
					</div>
				</div>
			</section>

			<!-- Newsletter Section -->
			<section id="newsletter" style="background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); color: white; padding: 5rem 0; margin-top: 5rem;">
				<div style="max-width: 600px; margin: 0 auto; padding: 0 1.5rem; text-align: center;">
					<h2 style="color: white; margin-bottom: 1.25rem; font-size: 2rem;">Les 3 angles de la semaine</h2>
					<p style="color: rgba(255,255,255,0.9); font-size: var(--text-xl); margin-bottom: 2.5rem;">
						Chaque vendredi, recevez notre sÃ©lection d'insights IA directement applicables Ã  votre mÃ©tier
					</p>
					
					<!-- Bouton vers page newsletter -->
					<a href="/newsletter" style="display: inline-flex; align-items: center; gap: 0.75rem; background: white; color: var(--color-primary); padding: var(--space-4) 2.5rem; border-radius: var(--radius-xl); text-decoration: none; font-weight: var(--font-semibold); font-size: var(--text-lg); box-shadow: 0 4px 15px rgba(0,0,0,0.15); transition: all 0.3s; margin-bottom: 1.5rem;">
						Rejoindre la newsletter
						<span>â†’</span>
					</a>
					
					<p style="font-size: var(--text-sm); margin-top: 1.25rem; opacity: 0.9;">
						Pas de spam. DÃ©sabonnement en 1 clic.
					</p>
				</div>
			</section>
		</main>
		<Footer />
	</body>
</html>
